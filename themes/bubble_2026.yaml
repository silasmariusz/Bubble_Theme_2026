# ------------------------------------------------------------------------------
# THEME PACK 2025/2026 - BUBBLE & DUBBLE
# ------------------------------------------------------------------------------
# Fixes:
# 1. Text visibility on active accents (Black text on Lime/Cyan).
# 2. Sidebar icon visibility.
# 3. Correct Bubble borders for Dark/Light modes.
# ------------------------------------------------------------------------------

# ==============================================================================
# BASE LOGIC & CARD MODS (SHARED) - DO NOT EDIT THIS BLOCK
# ==============================================================================
x-bubble-shared: &bubble_shared
  card-mod-root-yaml: |
    .: |
      @media only screen and (max-width: 768px) {
          .header { display: none; opacity: 0; }
          #view { padding-top: 0 !important; margin-top: 0 !important; height: calc(100vh - env(safe-area-inset-top)) !important; }
      }
  card-mod-more-info-yaml: |
    $: |
     .mdc-dialog .mdc-dialog__scrim { backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px); background: rgba(0,0,0,.6); } 
     .mdc-dialog .mdc-dialog__container .mdc-dialog__surface { box-shadow: none !important; border-radius: var(--ha-card-border-radius); }
    .: |
     :host { --ha-card-box-shadow: none; }
  card-mod-view-yaml: |
    hui-sidebar-view:
      $: |
        .container { overflow: hidden; }
        @media only screen and (min-width: 768px) { .container { max-width: 520px; margin: auto !important; width: -webkit-fill-available; } }
        #wrapper: |
          $: |
            #progressContainer { border-radius: 14px !important; }
      .: |
        hui-view { transform: translate3d(0px, -60px, 0px); }
        "#view>hui-view>hui-sidebar-view$#main>hui-card-options:nth-child(7)>vertical-stack-in-card$ha-card>div>hui-horizontal-stack-card$#root>hui-grid-card$#root>hui-entities-card$#states>div:nth-child(4)>slider-entity-row$div>ha-slider$#sliderBar$#progressContainer" { border-radius: 14px !important; }
  card-mod-card: |
    ha-card { transition: none; border-style: none !important; }

# ==============================================================================
# BASE COLORS LOGIC (ANCHORS)
# ==============================================================================
x-bubble-colors-dark: &bubble_colors_dark # Fonts
  primary-font-family: "Inter, Figtree, sans-serif"
  ha-font-family-body: "var(--primary-font-family)"
  ha-font-family-heading: var(--primary-font-family)
  ha-card-header-font-family: "var(--primary-font-family)"

  # ----------------------------------------------------------------------------
  # CORE MAPPING
  # ----------------------------------------------------------------------------
  primary-color: var(--token-accent)
  accent-color: var(--token-accent)

  # Text Colors
  text-color: var(--token-text)
  primary-text-color: var(--token-text)
  secondary-text-color: var(--token-text-secondary)

  # CRITICAL FIX: Explicitly controls text color on active elements (Buttons/Badges)
  text-primary-color: var(--token-text-on-accent)

  # Backgrounds
  background-color: var(--token-bg)
  primary-background-color: var(--token-bg)
  secondary-background-color: var(--token-bg-secondary)
  ha-card-background: var(--token-card)
  card-background-color: var(--token-card)

  # Header
  app-header-background-color: var(--token-bg)
  app-header-text-color: var(--token-text)

  # Sidebar (Fixed Visibility)
  sidebar-background-color: var(--token-bg)
  sidebar-text-color: var(--token-text)
  sidebar-icon-color: var(--token-sidebar-icon)
  sidebar-selected-icon-color: var(--token-accent)
  sidebar-selected-text-color: var(--token-text)

  # Controls
  switch-checked-button-color: var(--token-accent)
  switch-checked-track-color: var(--token-card)
  switch-unchecked-button-color: var(--token-text-secondary)
  switch-unchecked-track-color: var(--token-bg-secondary)

  slider-color: var(--token-accent)
  paper-slider-knob-color: var(--token-accent)
  paper-slider-active-color: var(--token-accent)
  paper-slider-pin-color: var(--token-accent)

  # Bubble Specific
  bubble-accent-color: var(--token-accent)
  bubble-button-accent-color: var(--token-accent)

  # REQUIRED BORDER FIX FOR DARK MODE
  bubble-border: "var(--ha-card-border-width, 1.8px) solid var(--divider-color, #e0e0e0)"

  # Shapes
  ha-card-border-radius: "28px"
  ha-card-box-shadow: "none"
  ha-card-border-width: "0px"
  control-button-border-radius: "24px"

  # Semantics
  success-color: var(--token-success)
  warning-color: var(--token-warning)
  error-color: var(--token-error)
  info-color: var(--token-info)

  # Semantic Aliases
  red-color: var(--error-color)
  green-color: var(--success-color)
  yellow-color: var(--warning-color)
  blue-color: var(--info-color)

# Light mode anchor (inherits structure, overrides border)
x-bubble-colors-light: &bubble_colors_light
  <<: *bubble_colors_dark
  # REQUIRED BORDER FIX FOR LIGHT MODE
  bubble-border: "var(--ha-card-border-width, 1.8px) solid var(--divider-color, rgba(31, 31, 31, 1))"

# ==============================================================================
# THEME: BUBBLE 2026
# ==============================================================================
Bubble 2026:
  card-mod-theme: Bubble 2026
  <<: *bubble_shared
  modes:
    dark:
      # Color Tokens
      token-accent: "rgb(80, 110, 172)" # Original Blue/Indigo
      token-text-on-accent: "#ffffff" # White text on Blue is OK

      token-bg: "rgba(57, 54, 70, 1)" # Original Purple-Grey
      token-bg-secondary: "rgb(92, 83, 103)"
      token-card: "rgba(79, 69, 87, 1)" # Original Card

      token-text: "#ffffff"
      token-text-secondary: "#b0b0b0"
      token-sidebar-icon: "#98a7b9" # Distinct Grey Blue

      token-success: "rgba(0, 202, 139, 1)"
      token-warning: "rgba(222, 176, 107, 1)"
      token-error: "rgba(247, 53, 67, 1)"
      token-info: "rgba(26, 137, 245, 1)"

      <<: *bubble_colors_dark

    light:
      token-accent: "#e69c9c" # Original Pinkish
      token-text-on-accent: "#ffffff" # White on Pink

      token-bg: "#eff1f5"
      token-bg-secondary: "#ccd0da"
      token-card: "#dce0e8"

      token-text: "#4c4f69"
      token-text-secondary: "#6c6f85"
      token-sidebar-icon: "#8c8fa1"

      token-success: "rgba(46, 204, 113, 1)"
      token-warning: "rgba(245, 166, 35, 1)"
      token-error: "rgba(231, 76, 60, 1)"
      token-info: "rgba(0, 122, 255, 1)"

      <<: *bubble_colors_light

# ==============================================================================
# THEME: BUBBLE 2026 BFG from mamarguerat
# ==============================================================================
Bubble 2026 BFG:
  card-mod-theme: Bubble 2026 BFG
  <<: *bubble_shared
  modes:
    dark:
      # Color Tokens
      token-accent: "rgb(80, 110, 172)" # Original Blue/Indigo
      token-text-on-accent: "#ffffff" # White text on Blue is OK

      token-bg: "rgba(57, 54, 70, 1)" # Original Purple-Grey
      token-bg-secondary: "rgb(92, 83, 103)"
      token-card: "rgba(79, 69, 87, 1)" # Original Card

      token-text: "#ffffff"
      token-text-secondary: "#b0b0b0"
      token-sidebar-icon: "#98a7b9" # Distinct Grey Blue

      token-success: "rgba(0, 202, 139, 1)"
      token-warning: "rgba(222, 176, 107, 1)"
      token-error: "rgba(247, 53, 67, 1)"
      token-info: "rgba(26, 137, 245, 1)"

      lovelace-background: "center / cover no-repeat url('https://raw.githubusercontent.com/silasmariusz/Bubble_Theme_2026/refs/heads/main/www/bubble_2026_bfg_background.png') fixed"

      <<: *bubble_colors_dark

    light:
      token-accent: "#e69c9c" # Original Pinkish
      token-text-on-accent: "#ffffff" # White on Pink

      token-bg: "#eff1f5"
      token-bg-secondary: "#ccd0da"
      token-card: "#dce0e8"

      token-text: "#4c4f69"
      token-text-secondary: "#6c6f85"
      token-sidebar-icon: "#8c8fa1"

      token-success: "rgba(46, 204, 113, 1)"
      token-warning: "rgba(245, 166, 35, 1)"
      token-error: "rgba(231, 76, 60, 1)"
      token-info: "rgba(0, 122, 255, 1)"

      lovelace-background: "center / cover no-repeat url('https://raw.githubusercontent.com/silasmariusz/Bubble_Theme_2026/refs/heads/main/www/bubble_2026_bfg_background-light.png') fixed"

      <<: *bubble_colors_light

# ==============================================================================
# THEME: DUBBLE DARK 2025 LIME (YOUR CUSTOM MOD)
# ==============================================================================
Dubble Dark 2025 Lime:
  card-mod-theme: Dubble Dark 2025 Lime
  <<: *bubble_shared
  modes:
    dark:
      # High Contrast Setup
      token-accent: "rgba(173, 255, 92, 1)" # Neon Lime
      token-text-on-accent: "#000000" # FIX: BLACK TEXT on Lime

      token-bg: "rgba(25, 27, 26, 1)" # Deep Dark Grey
      token-bg-secondary: "rgba(44, 51, 47, 1)"
      token-card: "rgba(37, 41, 42, 1)" # Dark Card

      token-text: "#ffffff"
      token-text-secondary: "rgb(244, 238, 224)"
      token-sidebar-icon: "#98a7b9" # Visible Grey

      token-success: "rgba(173, 255, 92, 1)"
      token-warning: "rgba(255, 177, 92, 1)"
      token-error: "rgba(255, 92, 122, 1)"
      token-info: "rgba(70, 164, 255, 1)"

      <<: *bubble_colors_dark

    light:
      token-accent: "#78be20" # Darker Lime for Light Mode
      token-text-on-accent: "#ffffff"

      token-bg: "#f4f7f6"
      token-bg-secondary: "#e0e4e2"
      token-card: "#ffffff"

      token-text: "#202020"
      token-text-secondary: "#606060"
      token-sidebar-icon: "#808080"

      token-success: "#2ecc71"
      token-warning: "#f5a623"
      token-error: "#e74c3c"
      token-info: "#007aff"

      <<: *bubble_colors_light

# ==============================================================================
# 3. BUBBLE DUBBLE (Noir Nebula Style - User Favorite)
# ==============================================================================
Bubble Dubble:
  card-mod-theme: Bubble Dubble
  <<: *bubble_shared
  modes:
    dark:
      token-accent: "#5ee9f2" # Neon Cyan
      token-text-on-accent: "#000000" # FIX: BLACK TEXT on Cyan

      token-bg: "#0b0e14" # Deep Space Noir
      token-bg-secondary: "#151a23"
      token-card: "#161b22" # GitHub Dark / VSCode style

      token-text: "#e6f5ff"
      token-text-secondary: "#8b949e"
      token-sidebar-icon: "#8b949e" # Muted Blue-Grey (Visible)

      token-success: "#3fb950"
      token-warning: "#d29922"
      token-error: "#f85149"
      token-info: "#58a6ff"

      <<: *bubble_colors_dark

    light:
      token-accent: "#0969da" # Standard Blue
      token-text-on-accent: "#ffffff"

      token-bg: "#ffffff"
      token-bg-secondary: "#f6f8fa"
      token-card: "#f6f8fa"

      token-text: "#24292f"
      token-text-secondary: "#57606a"
      token-sidebar-icon: "#57606a"

      token-success: "#2da44e"
      token-warning: "#bf8700"
      token-error: "#cf222e"
      token-info: "#0969da"

      <<: *bubble_colors_light

# ==============================================================================
# 4. BUBBLE IDDQD (God Mode / High Contrast / Doom Inspired)
# ==============================================================================
Bubble IDDQD:
  card-mod-theme: Bubble IDDQD
  <<: *bubble_shared
  modes:
    dark:
      token-accent: "#ffd700" # Gold / Amber
      token-text-on-accent: "#000000" # FIX: BLACK TEXT on Gold

      token-bg: "#1d1f21" # Gunmetal Black
      token-bg-secondary: "#282a2e"
      token-card: "#373b41" # Dark Grey Card

      token-text: "#c5c8c6"
      token-text-secondary: "#969896"
      token-sidebar-icon: "#e0e0e0" # High visibility white/grey

      token-success: "#b5bd68"
      token-warning: "#f0c674"
      token-error: "#cc6666"
      token-info: "#81a2be"

      <<: *bubble_colors_dark

    light:
      token-accent: "#e0ac00" # Darker Gold
      token-text-on-accent: "#ffffff"

      token-bg: "#ffffff"
      token-bg-secondary: "#f0f0f0"
      token-card: "#f5f5f5"

      token-text: "#202020"
      token-text-secondary: "#505050"
      token-sidebar-icon: "#505050"

      token-success: "#718c00"
      token-warning: "#e18a07"
      token-error: "#c82829"
      token-info: "#4271ae"

      <<: *bubble_colors_light

# ==============================================================================
# 5. DUBBLE PEBKAC (Gruvbox Style / Retro)
# ==============================================================================
Dubble PEBKAC:
  card-mod-theme: Dubble PEBKAC
  <<: *bubble_shared
  modes:
    dark:
      token-accent: "#fe8019" # Bright Orange
      token-text-on-accent: "#000000" # FIX: BLACK TEXT on Orange

      token-bg: "#282828" # Gruvbox Dark
      token-bg-secondary: "#3c3836"
      token-card: "#504945" # Lighter Brown/Grey

      token-text: "#ebdbb2" # Creamy White
      token-text-secondary: "#a89984"
      token-sidebar-icon: "#d5c4a1" # Beige (Visible)

      token-success: "#b8bb26"
      token-warning: "#fabd2f"
      token-error: "#fb4934"
      token-info: "#83a598"

      <<: *bubble_colors_dark

    light:
      token-accent: "#af3a03" # Dark Orange/Red
      token-text-on-accent: "#ffffff"

      token-bg: "#fbf1c7" # Gruvbox Light Cream
      token-bg-secondary: "#ebdbb2"
      token-card: "#f9f5d7"

      token-text: "#3c3836"
      token-text-secondary: "#7c6f64"
      token-sidebar-icon: "#7c6f64"

      token-success: "#98971a"
      token-warning: "#d79921"
      token-error: "#cc241d"
      token-info: "#458588"

      <<: *bubble_colors_light
